# ================================================================================
# PHARMACY AI AGENT - ENVIRONMENT CONFIGURATION
# ================================================================================
# Copy this file to .env and configure with your actual values
# Required variables are marked with [REQUIRED]
# ================================================================================

# ================================================================================
# OPENAI API CONFIGURATION
# ================================================================================

# [REQUIRED] OpenAI API Key
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_api_key_here

# OpenAI Model Selection
# Default: gpt-5-mini
OPENAI_MODEL=gpt-5-mini

# API Request Timeout (seconds)
# Maximum time to wait for OpenAI API response
# Recommended: 20.0 for streaming responses
# Default: 20.0
OPENAI_TIMEOUT=20.0

# ================================================================================
# AUTH CONFIGURATION
# ================================================================================

# Optional pepper added to passwords before hashing
# Leave empty in dev or set to a secret value in production
PASSWORD_PEPPER=

# Bcrypt cost factor (higher = slower, more secure)
# Default: 12
BCRYPT_ROUNDS=12

# ================================================================================
# SERVER CONFIGURATION
# ================================================================================

# Backend Server Port
# Port where FastAPI backend will run
# Default: 8000
PORT=8000

# Frontend Origin URL
# URL of the frontend application for CORS
# Default: http://localhost:3000
FRONTEND_ORIGIN=http://localhost:3000

# Allowed CORS Origins (comma-separated)
# Additional origins allowed to access the API
# Example: http://localhost:3000,http://localhost:5173,https://yourdomain.com
# If not specified, uses FRONTEND_ORIGIN value
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ================================================================================
# DATA SOURCE CONFIGURATION
# ================================================================================

# Medication Data Source
# Options: "api" (JSON files) or "db" (SQLite database)
# Default: db
MEDICATION_DATA_SOURCE=db

# ================================================================================
# EXTERNAL SERVICE URLS
# ================================================================================

# Inventory Service URL
# URL of the demo inventory microservice
# Default: http://127.0.0.1:8001
# Docker: http://inventory:8001
INVENTORY_SERVICE_URL=http://127.0.0.1:8001

# Medication Service URL
# URL of external medication information service (if using)
# Default: http://127.0.0.1:8002
MEDICATION_SERVICE_URL=http://127.0.0.1:8002

# ================================================================================
# DATA FILE PATHS
# ================================================================================
# Override default paths for data files (optional)
# Paths are relative to project root or absolute
# ================================================================================

# Medications Data (JSON format)
# Default: backend/../data/medications.json
MEDICATIONS_JSON_PATH=backend/../data/medications.json

# Medications Database (SQLite)
# Default: backend/../data/medications.db
MEDICATIONS_DB_PATH=backend/../data/medications.db

# User Database (SQLite)
# Default: backend/../data/users.db
USER_DB_PATH=backend/../data/users.db

# Demo Users (JSON format)
# Default: backend/../data/demo_users.json
USERS_JSON_PATH=backend/../data/demo_users.json

# Demo Prescriptions (JSON format)
# Default: backend/../data/demo_prescriptions.json
PRESCRIPTIONS_JSON_PATH=backend/../data/demo_prescriptions.json

# Inventory Data (JSON format)
# Default: backend/../demo_server_app/data/inventory.json
INVENTORY_JSON_PATH=backend/../demo_server_app/data/inventory.json

# ================================================================================
# TOOL CONFIGURATION
# ================================================================================

# Tool Schemas Directory
# Directory containing OpenAI function/tool JSON schemas
# Default: backend/../open_ai_tool_schemas
TOOL_SCHEMAS_DIR=backend/../open_ai_tool_schemas

# Allowed Tools (comma-separated list of JSON schema filenames)
# Uncomment and modify to restrict available tools
# Default: All 7 tools enabled
# ALLOWED_TOOLS=resolve_medication_id.json,get_medication_info.json,check_stock.json,search_by_ingredient.json,get_user_prescriptions.json,get_handling_warnings.json,find_nearest_pharmacy.json

# Available Tools:
# - resolve_medication_id.json: Convert medication name to internal ID
# - get_medication_info.json: Get detailed medication information
# - check_stock.json: Check medication stock availability
# - search_by_ingredient.json: Search medications by active ingredient
# - get_user_prescriptions.json: Get user's prescription list
# - get_handling_warnings.json: Get medication handling warnings
# - find_nearest_pharmacy.json: Find nearby pharmacy locations

# ================================================================================
# LOGGING CONFIGURATION
# ================================================================================
# Note: Some logging settings are hardcoded in app.py and may require code changes
# ================================================================================

# Log Level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO (hardcoded in app.py)
# LOG_LEVEL=INFO

# Log File Path
# Path to application log file
# Default: logs/pharmacy_agent.log (hardcoded in app.py)
# LOG_FILE_PATH=logs/pharmacy_agent.log

# ================================================================================
# SECURITY & PRIVACY CONFIGURATION
# ================================================================================
# Note: Some security settings are hardcoded in app.py and may require code changes
# ================================================================================

# Enable PII Masking in Logs
# Masks personally identifiable information (emails, phone numbers, etc.) in logs
# Default: true (hardcoded in app.py)
# ENABLE_PII_MASKING=true

# Enable Safety Guards
# Enforces no-medical-advice policy through prompt engineering
# Default: true (always enabled)
# ENABLE_SAFETY_GUARDS=true

# ================================================================================
# AGENT BEHAVIOR CONFIGURATION
# ================================================================================
# Note: These are currently not implemented but recommended for production
# ================================================================================

# Maximum Tool Calls Per Conversation
# Prevent infinite loops and excessive API usage
# Recommended: 10
# MAX_TOOL_CALLS=10

# Maximum Agent Iterations
# Maximum number of reasoning iterations
# Recommended: 5
# AGENT_MAX_ITERATIONS=5

# Enable Streaming Responses
# Stream AI responses to client in real-time
# Default: true (implemented)
# ENABLE_STREAMING=true

# ================================================================================
# SESSION CONFIGURATION
# ================================================================================
# Note: Currently the agent is stateless (as per assignment requirements)
# These would be needed for future session management
# ================================================================================

# Session Timeout (seconds)
# How long before user session expires
# Default: 3600 (1 hour)
# SESSION_TIMEOUT=3600

# Enable Session Storage
# Store conversation history for multi-turn conversations
# Default: false (stateless agent per requirements)
# ENABLE_SESSION_STORAGE=false

# ================================================================================
# DEVELOPMENT & DEBUGGING
# ================================================================================

# Enable Debug Mode
# Shows detailed error messages and stack traces
# WARNING: Do not enable in production
# Default: false
# DEBUG_MODE=false

# Enable Request Logging
# Log all incoming HTTP requests
# Default: true
# ENABLE_REQUEST_LOGGING=true

# Enable Tool Call Logging
# Log all OpenAI tool/function calls
# Default: true
# ENABLE_TOOL_LOGGING=true

# ================================================================================
# DOCKER CONFIGURATION
# ================================================================================
# These are typically set in docker-compose.yml and override the values above
# ================================================================================

# Backend URL (for Docker networking)
# BACKEND_URL=http://backend:8000

# Frontend URL (for Docker networking)
# FRONTEND_URL=http://frontend:3000

# Inventory Service URL (for Docker networking)
# INVENTORY_SERVICE_URL=http://inventory:8001

# ================================================================================
# MULTILINGUAL SUPPORT
# ================================================================================

# Default Language
# Options: en (English), he (Hebrew), ru (Russian), ar (Arabic)
# Default: en
# DEFAULT_LANGUAGE=en

# Supported Languages (comma-separated)
# Default: en,he,ru,ar (all 4 languages supported)
# SUPPORTED_LANGUAGES=en,he,ru,ar

# ================================================================================
# RATE LIMITING (Future Enhancement)
# ================================================================================

# Enable Rate Limiting
# Limit API requests per user/IP
# Default: false (not implemented)
# ENABLE_RATE_LIMITING=false

# Rate Limit (requests per minute)
# Default: 60
# RATE_LIMIT_PER_MINUTE=60

# ================================================================================
# MONITORING & ANALYTICS (Future Enhancement)
# ================================================================================

# Enable Analytics
# Track usage metrics and conversation analytics
# Default: false (not implemented)
# ENABLE_ANALYTICS=false

# Analytics Service URL
# ANALYTICS_SERVICE_URL=http://localhost:9000

# ================================================================================
# END OF CONFIGURATION
# ================================================================================
